{% extends 'layout.html' %} {% block content %}
<div class="container mt-4">
  <h2>Periods / Weekly Schedule</h2>
  <a href="{{ url_for('admin_periods_create') }}" class="btn btn-primary mb-3"
    >1Create Period</a
  >
  <table class="table table-sm table-striped">
    <thead>
      <tr>
        <th>Day</th>
        <th>Period</th>
        <th>Start</th>
        <th>End</th>
        <th>Class</th>
        <th>Subject</th>
        <th></th>
      </tr>
    </thead>
    <tbody>
      {% for p in periods %}
      <tr>
        <td>{{ days[p.day_of_week] }}</td>
        <td>{{ p.period_num }}</td>
        <td>{{ p.start_time or '' }}</td>
        <td>{{ p.end_time or '' }}</td>
        <td>{{ p.klass.name if p.klass }}</td>
        <td>{{ p.subject.name if p.subject }}</td>
        <td>
          <a
            href="{{ url_for('admin_periods_edit', period_id=p.id) }}"
            class="btn btn-sm btn-secondary"
            >Edit</a
          >
          <form
            action="{{ url_for('admin_periods_delete', period_id=p.id) }}"
            method="post"
            style="display: inline-block"
          >
            <button
              type="submit"
              class="btn btn-sm btn-danger"
              onclick="return confirm('Delete period?')"
            >
              Delete
            </button>
          </form>
        </td>
      </tr>
      {% else %}
      <tr>
        <td colspan="7">No periods defined yet.</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>
{% endblock %}
