{% extends 'layout.html' %}

{% block content %}
<div class="container mt-4">
    <h2>{{ 'Edit Period' if period else 'Create Period' }}</h2>
    <form method="post">
        <div class="mb-3">
            <label class="form-label">Day</label>
            <select name="day_of_week" class="form-select" required>
                {% for d in days %}
                <option value="{{ loop.index0 }}" {% if period and period.day_of_week==loop.index0 %}selected{% endif
                    %}>{{ d }}</option>
                {% endfor %}
            </select>
        </div>
        <div class="mb-3">
            <label class="form-label">Period Number</label>
            <input type="number" name="period" class="form-control" value="{{ period.period if period else 1 }}" min="1"
                required>
        </div>
        <div class="mb-3 row">
            <div class="col">
                <label class="form-label">Start Time</label>
                <input type="time" name="start_time" class="form-control"
                    value="{{ period.start_time if period and period.start_time else '' }}">
            </div>
            <div class="col">
                <label class="form-label">End Time</label>
                <input type="time" name="end_time" class="form-control"
                    value="{{ period.end_time if period and period.end_time else '' }}">
            </div>
        </div>
        <div class="mb-3">
            <label class="form-label">Class (optional)</label>
            <select name="class_id" class="form-select">
                <option value="">-- None --</option>
                {% for c in classes %}
                <option value="{{ c.id }}" {% if period and period.class_id==c.id %}selected{% endif %}>{{ c.name }}
                </option>
                {% endfor %}
            </select>
        </div>
        <div class="mb-3">
            <label class="form-label">Subject (optional)</label>
            <select name="subject_id" class="form-select">
                <option value="">-- None --</option>
                {% for s in subjects %}
                <option value="{{ s.id }}" {% if period and period.subject_id==s.id %}selected{% endif %}>{{ s.name }}
                </option>
                {% endfor %}
            </select>
        </div>
        <button type="submit" class="btn btn-primary">Save</button>
        <a href="{{ url_for('admin_periods') }}" class="btn btn-secondary">Cancel</a>
    </form>
</div>
{% endblock %}