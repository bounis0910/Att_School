{% extends 'layout.html' %} {% block content %}
<h3>Attendance Records - {{ today }}</h3>
<form method="get" class="mb-3">
  <label class="form-label">Date</label>
  <input
    type="date"
    class="form-control"
    name="date"
    value="{{ today }}"
    style="max-width: 200px"
  />
  <button class="btn btn-sm btn-primary mt-2">Filter</button>
</form>
<table class="table table-sm">
  <thead>
    <tr>
      <th>ID</th>
      <th>Student</th>
      <th>Class</th>
      <th>Period</th>
      <th>Status</th>
      <th>Teacher</th>
      <th>Actions</th>
    </tr>
  </thead>
  <tbody>
    {% for r in records %}
    <tr>
      <td>{{r.id}}</td>
      <td>{{ r.student_name or r.student_id }}</td>
      <td>{{ r.class_name or r.class_id }}</td>
      <td>{{r.period}}</td>
      <td>
        {% if r.status == 'present' %}
        <span class="badge bg-success">Present</span>
        {% else %}
        <span class="badge bg-warning">Absent</span>
        {% endif %}
      </td>
      <td>{{ r.teacher_name or r.teacher_id }}</td>
      <td>
        <form
          method="post"
          action="{{ url_for('admin_attendance_delete', att_id=r.id) }}"
          style="display: inline-block"
          onsubmit="return confirm('Delete attendance record?')"
        >
          <button class="btn btn-sm btn-danger">Delete</button>
        </form>
      </td>
    </tr>
    {% else %}
    <tr>
      <td colspan="7" class="text-center text-muted">
        No attendance records found for this date
      </td>
    </tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}
